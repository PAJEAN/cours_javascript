<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Le JavaScript</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="page" id="page">
            <div id="header-container">Les tableaux</div>

            <p>
                Un tableau est une structure ordonn√©e de donn√©es qui permet l'acc√®s aux informations qu'il contient par un indice. En JavaScript un tableau peut <b>contenir plusieurs types de donn√©es √† la fois</b>.
            </p>

            <div id="cells42"></div>

            <div id="cells42-1"></div>

            <div id="cells43"></div>

            <div id="cells44"></div>

            <h2> M√©thodes associ√©es √† l'objet <code>Array</code> </h2>

            <p>
                Vous pouvez retrouver l'ensemble des fonctions sur <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Array">developer.mozilla.org</a>.
            </p>

            <div id="cells45"></div>
            
            <div id="cells46"></div>
            
            <div id="cells47"></div>

            <div class="nota-bene-box">
                <div class="nota-bene-header">
                    <span class="box-icon">üìù</span>
                    <span class="box-title">√Ä savoir</span>
                </div>
                <div class="box-content">
                    <p>
                        La m√©thode <code>splice()</code> retourne un tableau contenant les √©l√©ments supprim√©s. Si un seul √©l√©ment est supprim√©, un tableau contenant un unique √©l√©ment est retourn√©.
                    </p>
                </div>
            </div>
            
            <div id="cells48"></div>

            <div id="cells49"></div>

            <p>
                La m√©thode <code>slice()</code> renvoie un objet tableau contenant une <b>copie superficielle</b> d'une portion du tableau d'origine. La portion est d√©finie par un indice de d√©but et un indice de fin (exclu). Contrairement √† la m√©thode <code>splice()</code> le tableau d'origine ne sera pas modifi√©.
            </p>

            <div id="cells50"></div>

            <button class="btn toggle-answer">
                Afficher la r√©ponse
            </button>
            <div class="hidden">
                <div id="cells50-1"></div>
            </div>

            <div id="cells51"></div>

            <button class="btn toggle-answer">
                Afficher l'explication
            </button>
            <div class="hidden">
                <p>
                    La m√©thode <code>slice()</code> effectue une copie superficielle du tableau. JavaScript <b>copie par valeur les primitives et par r√©f√©rence les objets</b>.
                </p>
            </div>

            <p>
                La m√©thode <code>every()</code> permet de tester si le tableau respecte une condition, d√©crite au sein d'une fonction, sur l'ensemble de ses √©l√©ments.
            </p>

            <div id="cells52"></div>

            <p>
                La m√©thode <code>filter()</code> retourne un nouveau tableau contenant tous les √©l√©ments du tableau initial qui remplissent la condition d√©finie dans la fonction pass√©e en param√®tre.
            </p>

            <div id="cells53"></div>

            <p>
                La m√©thode <code>map()</code> retourne un nouveau tableau compos√© des √©l√©ments du tableau initial sur lesquels une fonction a √©t√© appliqu√©e.
            </p>
            
            <div id="cells54"></div>

            <p>
                La m√©thode <code>reduce()</code> r√©duit le tableau en appliquant une fonction qui accumule deux √©l√©ments pour n'en <b>retourner qu'un seul</b>. La fonction accumulatrice est appel√©e jusqu'√† retourner qu'un seul √©l√©ment. Pour cela, elle prend 4 param√®tres :
            </p>

            <ul>
                <li> <i>accumulateur</i> : valeur retourn√©e par le pr√©c√©dent appel √† la fonction.</li>
                <li> <i>element</i> : l'√©l√©ment en cours de traitement.</li>
                <li> <i>index</i> : l'indice de l'√©l√©ment (optionnel).</li>
                <li> <i>origine</i> : le tableau d'origine (optionnel). </li>
            </ul>

            <p>
                La valeur initiale de l'accumulateur est soit celle fournie en param√®tre, soit, √† d√©faut, le premier √©l√©ment de l'it√©rable. Dans ce dernier cas, l'it√©ration commence au deuxi√®me √©l√©ment.
            </p>

            <p>
                Si on appelle <code>reduce()</code> sur un tableau vide sans fournir de valeur initiale, on aura une erreur.
            </p>

            <div id="cells54-1"></div>
            
            <p>
                La m√©thode <code>join()</code> retourne une cha√Æne de caract√®res compos√©es des √©l√©ments du tableau s√©par√©s par un s√©parateur pass√© en param√®tre.
            </p>

            <div id="cells55"></div>

            <div class="exercise-box">
                <div class="exercise-header">
                    <span class="box-icon">üí°</span>
                    <span class="box-title">Exercice</span>
                </div>
                <div class="box-content">
                    <p>
                        Exercice n¬∞1
                    </p>

                    <ul>
                        <li> √Ä partir du tableau suivant: <code>let tableau = ['mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi']</code> ajouter <i>'lundi'</i> au d√©but du tableau et <i>'dimanche'</i> √† la fin du tableau. </li>
                        <li> √Ä partir de la syntaxe de d√©composition, r√©p√©ter l'exercice ci-dessus en une seule √©tape. </li>
                        <li> Afficher la longueur en caract√®res de chaque jour de la semaine en une ligne de code. </li>
                    </ul>
                    
                    <p>
                        Exercice n¬∞2
                    </p>

                    <ul>
                        <li> Calculer la moyenne du tableau suivant: <code>let tableau = [8, 15, 12, 5, 2, 18]</code> en une ligne de code. </li>
                        <li> Calculer la somme √† partir du tableau suivant: <code>let tableau1 =  [['a', 8], ['b', 15], ['c', 12], ['d', 5], ['e', 2], ['f', 18]]</code>. Vous devez consid√©rer les valeurs en position 1 de chacun des √©l√©ments. </li>
                    </ul>
                </div>
            </div>

            <button class="btn toggle-answer" data-pw="es">
                Afficher la r√©ponse
            </button>
            <div class="hidden">
                <div id="cells56"></div>

                <div id="cells57"></div>
            </div>

            <p>
                La m√©thode <code>sort()</code> trie directement les √©l√©ments d'un tableau et <b>renvoie ce m√™me tableau</b>. Par d√©faut, elle compare les √©l√©ments apr√®s les avoir <b>convertis en cha√Ænes de caract√®res</b>, en utilisant l'ordre des codes UTF-16.
            </p>

            <div id="cells58"></div>

            <p>
                Pour trier un tableau de nombres, on fournit une fonction de comparaison en param√®tre √† <code>sort()</code>. Cette fonction re√ßoit deux √©l√©ments, nommons-les <i>a</i> et <i>b</i>, et renvoie un nombre indiquant leur ordre relatif :
            </p>

            <ul>
                <li> Si le retour est une valeur n√©gative alors <i>a</i> sera ordonn√© avant <i>b</i>. </li>
                <li> Si le retour est √©gal √† 0, alors l'ordre de <i>a</i> et <i>b</i> ne change pas. </li>
                <li> Si le retour est une valeur positive alors <i>b</i> sera ordonn√© avant <i>a</i>. </li>
            </ul>

            <div id="cells59"></div>

            <div class="exercise-box">
                <div class="exercise-header">
                    <span class="box-icon">üí°</span>
                    <span class="box-title">Exercice</span>
                </div>
                <div class="box-content">
                    <p>
                        Afin de mettre en pratique les diff√©rentes notions vues pr√©c√©dement, nous allons r√©aliser un CRUD (create, read, update, delete) √† partir uniquement de fonctions. Construisez une liste de courses (avec l'objet <code>Array</code>) dans laquelle chaque √©lement de ma liste est un tableau de taille 2 dans lequel l'index 0 correspond au nom de l'√©l√©ment et l'index 1 √† la quantit√© achet√©e.
                    </p>

                    <ul>
                        <li> Cr√©er une fonction pour ajouter un √©l√©ment √† la liste. Cette fonction prend en param√®tre le nom de l'√©l√©ment et la quantit√©.
                        <li> Cr√©er une fonction qui permet d'afficher les √©l√©ments de la liste avec leur quantit√© respective en les s√©parant avec " | ". </li>
                        <li> Ajouter √† la liste : 1 Balai, 2 Dentifrices et 3 Camemberts √† partir d'une fonction auto-√©x√©cut√©es (et de la fonction permettant d'ajouter un √©l√©ment √† la liste). </li>
                        <li> Cr√©er une fonction pour modifier la quantit√© d'un √©l√©ment de la liste en fonction de son index. </li>
                        <li> Incr√©menter la quantit√© de Camembert achet√© de 1. </li>
                        <li> Cr√©er une fonction pour supprimer un √©l√©ment de la liste en fonction de son index. </li>
                        <li> Supprimer de la liste le Balai. </li>
                        <li> Cr√©er une fonction qui exploite la m√©thode <i>reduce()</i> pour comptabiliser le nombre d'articles au total. </li>
                    </ul>
                </div>
            </div>

            <button class="btn toggle-answer" data-pw="al">
                Afficher la r√©ponse
            </button>
            <div class="hidden">
                <div id="cells60"></div>
            </div>

        </div>
    </div>


<!--
88888888888                              888          888            
    888                                  888          888            
    888                                  888          888            
    888   .d88b.  88888b.d88b.  88888b.  888  8888b.  888888 .d88b.  
    888  d8P  Y8b 888 "888 "88b 888 "88b 888     "88b 888   d8P  Y8b 
    888  88888888 888  888  888 888  888 888 .d888888 888   88888888 
    888  Y8b.     888  888  888 888 d88P 888 888  888 Y88b. Y8b.     
    888   "Y8888  888  888  888 88888P"  888 "Y888888  "Y888 "Y8888  
                                888                                  
                                888                                  
                                888                                  
-->

    <div id="template-container"></div>


<!--
 .d8888b.                   d8b          888    
d88P  Y88b                  Y8P          888    
Y88b.                                    888    
 "Y888b.    .d8888b 888d888 888 88888b.  888888 
    "Y88b. d88P"    888P"   888 888 "88b 888    
      "888 888      888     888 888  888 888    
Y88b  d88P Y88b.    888     888 888 d88P Y88b.  
 "Y8888P"   "Y8888P 888     888 88888P"   "Y888 
                                888             
                                888             
                                888             
-->

    <script src="../js/main.js"></script>

    <script>
        /* ==== Add cells ==== */
        
addCell('cells42', 'D√©clarer et instancier un tableau', `
var tableau = ["Merlin", 884, null, undefined];
console.log(tableau[0] + ' | ' + tableau[1] + ' | ' + tableau[2] + ' | ' + tableau[3]);

/* Utiliser le constructeur de l'objet  pour initialiser un tableau de taille 5 */
let tableau1 = new Array(5);
console.log('tableau1/Index_1: ' + tableau1[0]); // 5 valeurs undefined.

let tableau2 = new Array(5).fill(5);
console.log(tableau2.toString());
    `);

addCell('cells42-1', "Modifier une valeur √† partir d'un index", `
let tableau1 = ["Merlin", 884];
console.log(tableau1.toString());

tableau1[0] = "Perceval";
console.log(tableau1.toString());

let tableau2 = new Array(6);
console.log(tableau2.toString());

tableau2[2] = 't';
console.log(tableau2.toString());
`);

addCell('cells43', 'Syntaxe de d√©composition', `
let tableau = [1, 2, 3];
let [premier, deuxieme, troisieme] = tableau;
console.log(tableau.toString() + " | " + premier + " | " + deuxieme + " | " + troisieme);

let [first, ...reste] = tableau;
console.log(tableau.toString() + " | " + first + " | " + reste.toString());
`);

addCell('cells44', 'Tableau imbriqu√©', `
let tableau = [['Merlin', 884], ['Lapin adulte', 9]];
console.log(tableau[1][0]);
`);

addCell('cells45', "Taille d'un tableau", `
let tableau = [1, 2, 3];
console.log('Le tableau contient :', tableau.length, '√©lements');
`);

addCell('cells46', 'Ajouter un √©l√©ment', `
let tableau = [1, 2];
tableau.push(3);    // Ajout √† la fin.
tableau.unshift(0); // Ajout au d√©but.
console.log(tableau.toString());
`);

addCell('cells47', 'Supprimer un √©l√©ment', `
let tableau = [0, 1, 2, 3, 4, 5, 6, 7, 8];
console.log('tableau :', tableau.toString());

console.log('Suppression du dernier √©l√©ment.');
var element_pop = tableau.pop();
console.log(element_pop + " | " + typeof element_pop + " | " + tableau.toString());

console.log('Suppression du premier √©l√©ment.');
element_pop = tableau.shift();
console.log(element_pop + " | " + typeof element_pop + " | " + tableau.toString());

console.log("Suppression d'un √©l√©ment de taille 1 √† partir de l'index 0.");
element_pop = tableau.splice(0, 1);
console.log(element_pop + " | " + typeof element_pop + " | " + tableau.toString());

console.log("Suppression d'un √©l√©ment de taille 3 √† partir de l'index 1.");
element_pop = tableau.splice(1, 3);
console.log(element_pop + " | " + typeof element_pop + " | " + tableau.toString());
`);

addCell('cells48', "Rechercher l'index d'un √©l√©ment", `
let tableau = [1, 2, 'Arthur', 3, 4, 'Arthur'];

console.log('tableau.indexOf(2) :', tableau.indexOf(2));
console.log(tableau.indexOf('Arthur') + " est l'index du premier Arthur.");
console.log(tableau.indexOf('Arthur', 3) + " est l'index du premier Arthur √† partir de l'index 3.");
console.log(tableau.lastIndexOf('Arthur') + " est l'index du dernier Arthur.");
console.log(tableau.indexOf('Perceval') + " signifie que l'√©l√©ment n'a pas √©t√© trouv√©.");
`);

addCell('cells49', 'Concat√©nation de tableaux', `
let tableau1 = [0, 1];
let tableau2 = [2, 3];
let tableau3 = [4, 5];
let tableau4 = tableau1.concat(tableau2, tableau3);
let tableau5 = [...tableau1, ...tableau2, ...tableau3]
console.log(tableau4.toString());
console.log(tableau5.toString());
`);

addCell('cells50', 'M√©thode <code>slice()<code>', `
let tableau = [1, 2, 3, 4, 5, 6];
let portion1 = tableau.slice(1, 3);
console.log(tableau.toString() + " | " + portion1.toString());

let portion2 = tableau.slice(-3); // Index n√©gatif.
console.log(tableau.toString() + " | " + portion2.toString());

// Copie des primitives par valeur.
portion1[0] = 1000;
console.log(portion1.toString());
console.log(tableau.toString());

/* == En utilisant des indexes n√©gatifs, afficher la portion 2, 3, 4 == */
`);

addCell('cells50-1', 'R√©ponse', `
let tableau = [1, 2, 3, 4, 5, 6];
console.log(tableau.slice(-5, -2).toString());
`);

addCell('cells51', 'Question', `
let tableau = [[1, 2], [3, 4], [5, 6]];
let portion1 = tableau.slice(1, 2);

console.log('portion1 :');
console.log(portion1.map(el => el.toString()));

/* == Que contient le tableau apr√®s la modification de portion1 ? == */

console.log('Modification de portion1');

portion1[0][1] = 1000;
console.log('portion1 :');
console.log(portion1.map(el => el.toString()));
console.log('tableau :')
console.log(tableau.map(el => el.toString()));
`);

addCell('cells52', 'M√©thode <code>every()<code>', `
let tableau = [0, 2, 4, 6, 8];

let response = tableau.every(function(valeur) {
    return (valeur % 2 == 0);
});

console.log(response);
`);

addCell('cells53', 'M√©thode <code>filter()<code>', `
let tableau = [0, 2, 4, 5, 6, 7, 8];
let tableau_paire = tableau.filter(valeur => valeur % 2 == 0);

console.log(tableau.toString());
console.log(tableau_paire.toString());
`);

addCell('cells54', 'M√©thode <code>map()<code>', `
let tableau1 = ['lundi', 'mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi', 'dimanche'];

let tableau2 = tableau1.map(function(valeur){
   return valeur.toUpperCase();
});

console.log(tableau1.toString());
console.log(tableau2.toString());
`);

addCell('cells54-1', 'M√©thode <code>reduce()<code>', `
let tableau = [1, 2, 3, 4, 5]; // 1+2 | 3+3 | 6+4 | 10+5.
let somme = tableau.reduce(function(accumulateur, element) {
    return accumulateur + element;
})

console.log('Mon tableau : ' + tableau.toString());
console.log('Ma somme : ' + somme);

// Modification de la valeur initial de l'accumulateur.
let somme_plus_5 = tableau.reduce(function(accumulateur, element) {
    return accumulateur + element;
}, 5);
console.log('Ma somme + 5 : ' + somme_plus_5);
`);

addCell('cells55', 'M√©thode <code>join()<code>', `
var tableau = [0, 1, 2, 3];
console.log(tableau.join(" -*- "));
`);

addCell('cells56', 'Exercice n¬∞1', `
let tableau = ['mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi'];
// Q1.
tableau.unshift('lundi');
tableau.push('dimanche');
console.log(tableau.toString());
// Q2.
tableau = ['mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi'];
tableau = ['lundi', ...tableau, 'dimanche'];
console.log(tableau.toString());
// Q3.
console.log(tableau.map(el => el.length).toString());
`);

addCell('cells57', 'Exercice n¬∞2', `
// Q1.
let tableau = [8, 15, 12, 5, 2, 18];
console.log(tableau.reduce((acc, el) => acc + el) / tableau.length);
//Q2.
let tableau1 =  [['a', 8], ['b', 15], ['c', 12], ['d', 5], ['e', 2], ['f', 18]];
console.log(tableau1.reduce((acc, el) => acc + el[1], 0));
`);

addCell('cells58', 'M√©thodes <code>sort()<code> et <code>toSorted()<code>', `
let mon_tableau = ['mardi', 'mercredi', 'jeudi', 'vendredi', 'samedi'];
mon_tableau.sort();
console.log('mon_tableau.sort() ‚Üí', mon_tableau.toString());

let tableau = [4, 5, 3, 1, 22];
let tableau1 = tableau.toSorted();
console.log('- Fonction toSorted()');
console.log('tableau : ' + tableau.toString());
console.log('tableau1 : ' + tableau1.toString());
console.log('- Fonction sort()');
tableau.sort();
console.log(tableau.toString());
`);

addCell('cells59', 'Tri num√©rique', `
let tableau = [4, 5, 3, 1, 22];
tableau.sort((a, b) => {
    return a - b;
});
console.log(tableau.toString());
`);

addCell('cells60', 'R√©ponses', `
// Q1.
let liste = [];

function ajouter(nom, quantite) {
	liste.push([nom, quantite]);
}

// Q2.
function afficher() {
	console.log(liste.join(" | "));
}

// Q3.
(function() {
	ajouter("Balai", 1);
	ajouter("Dentifrice", 2);
	ajouter("Camembert", 3);
})();
afficher();

// Q4.
function editerQuantite(index, quantite) {
	liste[index][1] = quantite;
}

// Q5.
editerQuantite(2, 4);
afficher();

// Q6.
function supprimer(index) {
	liste.splice(index, 1);
}

// Q7.
supprimer(0);
afficher();

// Q8.
function total(){
	let somme = liste.reduce(function(accumulateur, element) {
			return accumulateur + element[1];
	}, 0);
	return somme;
}
console.log(total());
`);

/*        
        addCell('cells00', '', `

        `);
*/

    </script>
</body>
</html>