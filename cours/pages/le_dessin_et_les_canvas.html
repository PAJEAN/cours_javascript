<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Le JavaScript</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="page" id="page">
            <header>
                <h1 class="title">Le canvas</h1>
                <div class="toolbar">
                    <button class="btn" id="btn-print" title="Imprimer / Exporter en PDF">üñ®Ô∏è Imprimer</button>
                    <button class="btn" id="btn-theme" title="Changer le th√®me" data-initial="light">üåó Th√®me</button>
                </div>
            </header>

            <!-- ----------------------------------------------------------------------- -->
            <!--                         Le dessin et les canvas                         -->
            <!-- ----------------------------------------------------------------------- -->

            <h2> Le dessin et les canvas </h2>

            
            <p> 
            Depuis HTML5, le navigateur met √† disposition l'√©l√©ment <code>&lt;canvas></code>, qui offre une "toile blanche" sur laquelle on peut dessiner directement en JavaScript. Cet outil est utilis√© dans de nombreux domaines : graphiques interactifs, animations, visualisations de donn√©es, ou encore petits jeux vid√©o.
            </p>

            <h3> L'√©l√©ment <code>&lt;canvas></code> </h3>

            <p>
            Un <code>canvas</code> est une simple zone rectangulaire de la page, d√©finie par ses attributs width et height (en pixels). Par d√©faut, il est vide : c'est JavaScript qui se charge d'y dessiner. Pour dessiner, on doit d'abord obtenir un contexte de rendu √† partir du canvas. Cela se fait avec la m√©thode :
            </p>

<textarea class="editor mt" spellcheck="false">
const canvas = document.getElementById('monCanvas');
const ctx = canvas.getContext('2d');</textarea>

            <ul>
                <li> Le premier param√®tre ('2d') indique le type de rendu souhait√©. Dans ce cours, nous travaillerons sur le contexte 2D. </li>
                <li> Le second param√®tre (optionnel) permet de d√©finir certains attributs du contexte (par exemple l'utilisation ou non d'un canal alpha pour la transparence). </li>
            </ul>

            <p>
            Le contexte 2D (objet <code>CanvasRenderingContext2D</code>) fournit ensuite toutes les m√©thodes de dessin : tracer des formes, √©crire du texte, afficher des images, g√©rer des couleurs, etc.
            </p>

            <p>
            Le rep√©rage des positions dans un canvas exploite des coordonn√©es cart√©siennes <i>(x, y)</i> et l'origine du point <i>(0, 0)</i> est situ√©e en <b>haut √† gauche de l'√©l√©ment</b>.
            </p>

            <div style="width:100%;text-align:center;">
                <div><img src="../../images/canvas-grid.png" alt="canvas"/></div>
                <span>Source: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes">Mozilla</a>.</span>
            </div>

            <p>
            L'unit√© des angles est <b>le radian</b>. Pour rappel, 2pi radians √©quivalent √† 360¬∞, soit un tour complet. Le sens de rotation est l'inverse du sens trigonom√©trique soit celui des aiguilles d'une montre.
            </p>

            <div style="width:100%;text-align:center;">
                <div><img src="../../images/canvas-arc.png" alt="canvas"/></div>
                <span>Source: <a href="https://www.w3schools.com/tags/canvas_arc.asp">W3Schools</a>.</span>
            </div>

            <h3> Tracer des lignes </h3>

            <p>
            Pour tracer des lignes dans un canvas, il faut d'abord d√©finir un chemin avec un ou plusieurs segments de ligne. Un chemin est initialis√© avec l'appel √† la m√©thode <b><code>beginPath()</code></b>. Ensuite, les m√©thodes <code>moveTo()</code> et <code>lineTo()</code> permettent respectivement de d√©placer le curseur et d'ajouter des lignes au chemin.
            </p>

            <ul>
                <li> La m√©thode <code>moveTo(Integer x, Integer y)</code> √† partir d'un objet <code>CanvasRenderingContext2D</code> permet de d√©placer le pointeur vers la position <li>(x, y)</li> sans tracer de trait. </li>
                <li> La m√©thode <code>lineTo(Integer x, Integer y)</code> ajoute un nouveau point en <code>(x, y)</code> et dessine une ligne entre ce point et la derni√®re position sp√©cifi√©e au sein du contexte de canvas. </li>
                <li> La m√©thode <code>closePath()</code> ferme le chemin en tra√ßant une derni√®re ligne entre la position actuelle du contexte et la position √† l'initialisation du chemin (si on veut boucler avec le point initial). </li>
            </ul>


            <p>
            Enfin, la m√©thode *stroke()* permet d'afficher les ligne du chemin √† l'√©cran.
            </p>

            <div class="exercise-box">
                <div class="exercise-header">
                    <span class="box-icon">üí°</span>
                    <span class="box-title">Exercice</span>
                </div>
                <div class="box-content">
                    <p> √Ä partir des fonctions pr√©c√©dentes, construisez un carr√© de 100px de largeur en partant de la position <i>(10, 10)</i>. </p>
                </div>
            </div>

            <button class="btn toggle-answer" data-pw="an">
                Afficher la r√©ponse
            </button>
            <div class="hidden">
<textarea class="editor mt" spellcheck="false">
let canvas = document.getElementById('mycanvas')
let context = canvas.getContext('2d');
context.strokeStyle = 'green';
context.beginPath();
context.moveTo(0, 0);
context.lineTo(100,0);
context.lineTo(100,100);
context.lineTo(0,100);
context.closePath();
context.stroke();</textarea>
            </div>

            <p>
            Le <code>context</code> a des propri√©t√©s permettant de personnaliser les traits du dessin.
            </p>
            
            <ul>
                <li> La propri√©t√© <code>ctx.lineWidth</code> contient un entier d√©finissant l'√©paisseur du trait. </li>
                <li> La propri√©t√© <code>ctx.strokeStyle</code> est une cha√Æne d√©finissant la couleur du trait. </li>
            </ul>

            <div class="nota-bene-box">
                <div class="nota-bene-header">
                    <span class="box-icon">üìù</span>
                    <span class="box-title">√Ä savoir</span>
                </div>
                <div class="box-content">
                    <p>
                    Les fonctions <code>save()</code> et <code>restore()</code> permettent respectivement de sauvegarder le contexte et toutes les mises en forme en cours pour ensuite les reprendre.
                    </p>
                </div>
            </div>

            <h3> Tracer des formes </h3>

            <h4> Les arcs de cercle </h4>

            <p>
            Un arc de cercle centr√© sur <i>(x, y)</i> et de rayon <code>r</code>, entre les angles <code>a1</code> et <code>a2</code> (exprim√©s en radians) est dessin√© avec la m√©thode <code>arc(x, y, r, a1, a2)<code>. Cette m√©thode ne fait que compl√©ter le chemin mais n'affiche rien dans le canvas. Pour afficher un arc de cercle, il faut commencer par initialiser le chemin avec la fonction <code>beginPath()</code> puis l'afficher avec la fonction <code>stroke()</code>.
            </p>

            

            <br>

            <div>
                <hr>
                <div style="padding: 20px; min-width: 30px; max-width: 30px; margin: auto; background: white; border-radius: 50%;">
                    <img src="images/writing.png" alt="writing" width="30"/>
                </div>
            </div>
            <ul>
                <li> R√©aliser la figure suivante √† partir du carr√© pr√©c√©dent (rayon = 25). <br>
                <img src="images/canvas-square-arc.png" alt="writing"/>
                </li>
            </ul>
            <hr>

            #### Les courbes de B√©zier

            Une courbe de B√©zier est une ligne courbe entre un point de d√©part et un point d'arriv√©e. La forme de la courbe est d√©finie par deux points de contr√¥le, qui attirent et d√©forment la ligne initiale. La m√©thode *bezierCurveTo(xc1, yc1, xc2, yc2, x2, y2)* permet de cr√©er une courbe entre la position du pointeur actuel et la position *(x2, y2)* avec les points de contr√¥le *(xc1, yc1)* et *(xc2, yc2)*.


            <div style="width:100%;text-align:center;">
                <img src="images/bezier-curve.png" alt="canvas"/>
                <div style="margin: auto">Source: <a href="https://fr.wikipedia.org/wiki/Courbe_de_B%C3%A9zier">Wikipedia</a>.</div>
            </div>

            Par exemple: *context.bezierCurveTo(0,25,100,25,100,0);*

            <div style="width:100%;text-align:center;">
                <img src="images/canvas-bezier.png" alt="canvas"/>
            </div>

            #### Le rectangle

            La m√©thode *rect(x, y, largeur, hauteur)* permet de dessiner les contours d'un rectangle de *largeur x hauteur* dont le coin sup√©rieur gauche est en *(x, y)*.

            #### Le remplissage

            Tous les chemins dessin√©s jusqu'√† maintenant peuvent √©galement √™tre remplis avec la m√©thode *fill()*. Le style de remplissage est d√©fini dans le contexte par la propri√©t√© *fillStyle*.

        </div>
    </div>


<!--
88888888888                              888          888            
    888                                  888          888            
    888                                  888          888            
    888   .d88b.  88888b.d88b.  88888b.  888  8888b.  888888 .d88b.  
    888  d8P  Y8b 888 "888 "88b 888 "88b 888     "88b 888   d8P  Y8b 
    888  88888888 888  888  888 888  888 888 .d888888 888   88888888 
    888  Y8b.     888  888  888 888 d88P 888 888  888 Y88b. Y8b.     
    888   "Y8888  888  888  888 88888P"  888 "Y888888  "Y888 "Y8888  
                                888                                  
                                888                                  
                                888                                  
-->

    <template id="cell-template">
        <section class="cell">
            <header>
                <div class="cell-title">
                    <span class="badge">
                        <span class="dot"></span>
                        <span class="title-text">JavaScript</span>
                    </span>
                </div>
                <div class="cell-actions">
                    <button class="btn run">
                        <span class="icon">‚ñ∂</span>
                        <span class="label">Ex√©cuter</span>
                    </button>
                    <button class="btn reset">
                        <span class="icon">‚ü≥</span>
                        <span class="label">R√©initialiser</span>
                    </button>

                    <button class="btn clear">
                        <span class="icon">üßπ</span>
                        <span class="label">Effacer</span>
                    </button>
                </div>
            </header>
            <textarea class="editor" spellcheck="false"></textarea>
            <div class="output" aria-live="polite"></div>
        </section>
    </template>


<!--
 .d8888b.                   d8b          888    
d88P  Y88b                  Y8P          888    
Y88b.                                    888    
 "Y888b.    .d8888b 888d888 888 88888b.  888888 
    "Y88b. d88P"    888P"   888 888 "88b 888    
      "888 888      888     888 888  888 888    
Y88b  d88P Y88b.    888     888 888 d88P Y88b.  
 "Y8888P"   "Y8888P 888     888 88888P"   "Y888 
                                888             
                                888             
                                888             
-->

    <script src="../js/main.js"></script>

    <script>
        /* ==== Add cells ==== */

   
/*        
    addCell('cells00', '', `

    `);
*/

    </script>
</body>
</html>