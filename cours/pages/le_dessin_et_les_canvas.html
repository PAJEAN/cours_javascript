<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Le JavaScript</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="page" id="page">
            <div id="header-container">Le dessin et les canvas</div>

            <h2> Le dessin et les canvas </h2>
            
            <p> 
                Depuis HTML5, le navigateur met √† disposition l'√©l√©ment <code>&lt;canvas></code>, qui offre une "toile blanche" sur laquelle on peut dessiner directement en JavaScript. Cet outil est utilis√© dans de nombreux domaines : graphiques interactifs, animations, visualisations de donn√©es, ou encore petits jeux vid√©o.
            </p>

            <h3> L'√©l√©ment <code>&lt;canvas></code> </h3>

            <p>
                Un <code>canvas</code> est une simple zone rectangulaire de la page, d√©finie par ses attributs <i>width</i> et <i>height</i> (en pixels). Par d√©faut, il est vide : c'est JavaScript qui se charge d'y dessiner. Pour dessiner, on doit d'abord obtenir un contexte de rendu √† partir du canvas. Cela se fait avec la m√©thode :
            </p>

<textarea class="editor mt" spellcheck="false">
const canvas = document.getElementById('monCanvas');
const ctx = canvas.getContext('2d');</textarea>

            <ul>
                <li> Le premier param√®tre ('2d') indique le type de rendu souhait√©. Dans ce cours, nous nous concentrons sur le contexte 2D. </li>
                <li> Le second param√®tre (optionnel) permet de d√©finir certains attributs du contexte (par exemple l'utilisation ou non d'un canal alpha pour la transparence). </li>
            </ul>

            <p>
                Le contexte 2D (objet <code>CanvasRenderingContext2D</code>) fournit ensuite toutes les m√©thodes de dessin : tracer des formes, √©crire du texte, afficher des images, g√©rer des couleurs, <i>etc.</i>..
            </p>

            <p>
                Le rep√©rage des positions dans un canvas exploite des coordonn√©es cart√©siennes <i>(x, y)</i> et <b>l'origine du point</b> <i>(0, 0)</i> est situ√©e en <b>haut √† gauche de l'√©l√©ment</b>.
            </p>

            <div style="width:100%;text-align:center;">
                <div><img src="../../images/canvas-grid.png" alt="canvas"/></div>
                <span>Source: <a href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes">Mozilla</a>.</span>
            </div>

            <p>
                L'unit√© des angles est <b>le radian</b>. Pour rappel, 2pi radians √©quivalent √† 360¬∞, soit un tour complet. Le sens de rotation est l'inverse du sens trigonom√©trique soit celui des aiguilles d'une montre.
            </p>

            <div style="width:100%;text-align:center;">
                <div><img src="../../images/canvas-arc.png" alt="canvas"/></div>
                <span>Source: <a href="https://www.w3schools.com/tags/canvas_arc.asp">W3Schools</a>.</span>
            </div>

            <h3> Tracer des lignes </h3>

            <p>
                Pour tracer des lignes dans un canvas, il faut d'abord d√©finir un chemin avec un ou plusieurs segments de ligne. Un chemin est initialis√© avec l'appel √† la m√©thode <b><code>beginPath()</code></b>. Ensuite, les m√©thodes <code>moveTo()</code> et <code>lineTo()</code> permettent respectivement de d√©placer le curseur et d'ajouter des lignes au chemin.
            </p>

            <ul>
                <li> La m√©thode <code>moveTo(Integer x, Integer y)</code> √† partir d'un objet <code>CanvasRenderingContext2D</code> permet de d√©placer le pointeur vers la position <i>(x, y)</i> sans tracer de trait. </li>
                <li> La m√©thode <code>lineTo(Integer x, Integer y)</code> ajoute un nouveau point en <code>(x, y)</code> et dessine une ligne entre ce point et la derni√®re position sp√©cifi√©e au sein du contexte de canvas. </li>
                <li> La m√©thode <code>closePath()</code> ferme le chemin en tra√ßant une derni√®re ligne entre la position actuelle du contexte et la position √† l'initialisation du chemin (si on veut boucler avec le point initial). </li>
            </ul>


            <p>
                Enfin, la m√©thode <b><code>stroke()</code> permet d'afficher les lignes du chemin √† l'√©cran</b>.
            </p>

            <div class="exercise-box">
                <div class="exercise-header">
                    <span class="box-icon">üí°</span>
                    <span class="box-title">Exercice</span>
                </div>
                <div class="box-content">
                    <p>
                        √Ä partir des fonctions pr√©c√©dentes, construisez un carr√© de 100px de largeur en partant de la position <i>(0, 0)</i>.
                    </p>
                </div>
            </div>

            <button class="btn toggle-answer" data-pw="an">
                Afficher la r√©ponse
            </button>
            <div class="hidden">

<textarea class="editor mt" spellcheck="false">
let canvas = document.getElementById('mycanvas')
let context = canvas.getContext('2d');
context.strokeStyle = 'green';
context.beginPath();
context.moveTo(0, 0);
context.lineTo(100,0);
context.lineTo(100,100);
context.lineTo(0,100);
context.closePath();
context.stroke();</textarea>

            </div>

            <p>
                Le <code>context</code> a des propri√©t√©s permettant de personnaliser les traits du dessin.
            </p>
            
            <ul>
                <li> La propri√©t√© <code>ctx.lineWidth</code> contient un entier d√©finissant l'√©paisseur du trait. </li>
                <li> La propri√©t√© <code>ctx.strokeStyle</code> est une cha√Æne d√©finissant la couleur du trait. </li>
            </ul>

            <div class="nota-bene-box">
                <div class="nota-bene-header">
                    <span class="box-icon">üìù</span>
                    <span class="box-title">√Ä savoir</span>
                </div>
                <div class="box-content">
                    <p>
                        Les fonctions <code>save()</code> et <code>restore()</code> permettent respectivement de sauvegarder le contexte et toutes les mises en forme en cours pour ensuite les reprendre.
                    </p>
                </div>
            </div>

            <h3> Tracer des formes </h3>

            <h4> Les arcs de cercle </h4>

            <p>
                Un arc de cercle centr√© sur <i>(x, y)</i> et de rayon <code>r</code>, entre les angles <code>a1</code> et <code>a2</code> (exprim√©s en radians) est dessin√© avec la m√©thode <code>arc(x, y, r, a1, a2)</code>. Cette m√©thode ne fait que compl√©ter le chemin mais n'affiche rien dans le canvas. Pour afficher un arc de cercle, il faut commencer par initialiser le chemin avec la fonction <code>beginPath()</code> puis l'afficher avec la fonction <code>stroke()</code>.
            </p>

            <div class="exercise-box">
                <div class="exercise-header">
                    <span class="box-icon">üí°</span>
                    <span class="box-title">Exercice</span>
                </div>
                <div class="box-content">
                    <p>
                        R√©aliser la figure ci-dessous √† partir du carr√© pr√©c√©dent (rayon = 25).
                    </p>
                    <div style="text-align: center;"><img src="../../images/canvas-square-arc.png" alt="writing"/></div>
                </div>
            </div>

            <button class="btn toggle-answer" data-pw="rn">
                Afficher la r√©ponse
            </button>
            <div class="hidden">

<textarea class="editor mt" spellcheck="false">
let canvas = document.getElementById('mycanvas')
let context = canvas.getContext('2d');
context.strokeStyle = 'green';
context.beginPath();
context.moveTo(0, 0);
context.lineTo(100,0);
context.lineTo(100,100);
context.lineTo(0,100);
context.closePath();
context.stroke();
context.beginPath();
context.arc(100, 100, 25, 1.5*Math.PI, Math.PI);
context.stroke();</textarea>

            </div>

            <h4> Le rectangle </h4>

            <p>
                La m√©thode <code>rect(x, y, largeur, hauteur)</code> permet de dessiner les contours d'un rectangle de <i>largeur x hauteur</i> dont le coin sup√©rieur gauche est en <i>(x, y)</i>.
            </p>

            <h4> Le remplissage </h4>

            <p>
                Les formes dessin√©es sur le canvas peuvent non seulement √™tre trac√©es, mais aussi remplies gr√¢ce √† la m√©thode <code>fill()</code>. Le style de remplissage se d√©finit dans le contexte via la propri√©t√© <code>fillStyle</code>. La m√©thode <code>fillRect(x, y, largeur, hauteur)</code> permet quant √† elle de dessiner directement un rectangle rempli.
            </p>

<textarea class="editor mt" spellcheck="false">
context.fillStyle = '#0f0';
context.fillStyle = 'rgb(0, 255, 0)';
context.fillStyle = 'rgb(0, 255, 0, 0.5)';
</textarea>

            <h4> √âcrire du texte </h4>

            <p>
                L'√©criture de texte dans le canvas se fait avec la m√©thode <code>strokeText(String texte, Integer x, Integer y)</code> qui affiche le contour des lettres ou bien avec la m√©thode <code>fillText(String texte, Integer x, Integer y)</code> qui remplit les lettres. Par d√©faut, le point <i>(x, y)</i> est en bas √† gauche. La propri√©t√© <i>textBaseline</i> indique comment le texte doit s'appuyer sur la ligne d'√©criture (<i>alphabetic, middle, top, hanging, bottom</i>).
            </p>

            <h3> Transformation et rotation </h3>

            <p>
                Il est possible d'appliquer au contexte une matrice de transformation avec <code>setTransform(echelleX, inclineX, inclineY, echelleY, translateX, translateY)</code>. La m√©thode <code>rotate(angle)</code> permet d'affecter un effet de rotation au contexte.
            </p>

            <div style="width:100%;text-align:center;">
                <img src="../../images/correct-rotate-grid.png" alt="canvas"/>
                <div>Source: <a href="https://processing.org/tutorials/transform2d/">processing.org</a>.</div>
            </div>

            <div class="nota-bene-box">
                <div class="nota-bene-header">
                    <span class="box-icon">üìù</span>
                    <span class="box-title">√Ä savoir</span>
                </div>
                <div class="box-content">
                    <p>
                        Pour r√©initialiser la matrice de transformation <i>setTransform(1, 0, 0, 1, 0, 0)</i>.
                    </p>
                </div>
            </div>

            <p>
                Par d√©faut, les √©chelles <code>x</code> et <code>y</code> du canvas correspondent √† une unit√© √©gale √† un pixel. Modifier le facteur d'√©chelle revient donc √† changer la taille de cette unit√©. Par exemple, un facteur de <code>0.5</code> r√©duit l'unit√© √† un demi-pixel, et les formes sont alors dessin√©es deux fois plus petites. √Ä l'inverse, un facteur de <code>2.0</code> fait correspondre une unit√© √† deux pixels, et les formes apparaissent deux fois plus grandes.
            </p>
            
        </div>
    </div>

<!--
88888888888                              888          888            
    888                                  888          888            
    888                                  888          888            
    888   .d88b.  88888b.d88b.  88888b.  888  8888b.  888888 .d88b.  
    888  d8P  Y8b 888 "888 "88b 888 "88b 888     "88b 888   d8P  Y8b 
    888  88888888 888  888  888 888  888 888 .d888888 888   88888888 
    888  Y8b.     888  888  888 888 d88P 888 888  888 Y88b. Y8b.     
    888   "Y8888  888  888  888 88888P"  888 "Y888888  "Y888 "Y8888  
                                888                                  
                                888                                  
                                888                                      
 -->

    <div id="template-container"></div>

<!--
 .d8888b.                   d8b          888    
d88P  Y88b                  Y8P          888    
Y88b.                                    888    
 "Y888b.    .d8888b 888d888 888 88888b.  888888 
    "Y88b. d88P"    888P"   888 888 "88b 888    
      "888 888      888     888 888  888 888    
Y88b  d88P Y88b.    888     888 888 d88P Y88b.  
 "Y8888P"   "Y8888P 888     888 88888P"   "Y888 
                                888             
                                888             
                                888             
-->

    <script src="../js/main.js"></script>

    <script>
        /* ==== Add cells ==== */

   
/*        
    addCell('cells00', '', `

    `);
*/

    </script>
</body>
</html>