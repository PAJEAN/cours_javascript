<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Le JavaScript</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="wrapper">
        <div class="page" id="page">
            <header>
                <h1 class="title">L'int√©ractivit√©</h1>
                <div class="toolbar">
                    <button class="btn" id="btn-print" title="Imprimer / Exporter en PDF">üñ®Ô∏è Imprimer</button>
                    <button class="btn" id="btn-theme" title="Changer le th√®me" data-initial="light">üåó Th√®me</button>
                </div>
            </header>

            <!-- ----------------------------------------------------------------------- -->
            <!--                             L'int√©ractivit√©                             -->
            <!-- ----------------------------------------------------------------------- -->
            
            <h2> Les √©v√®nements </h2>

            <p> Le JavaScript est un langage √©v√©nementiel, c'est-√†-dire qu'il d√©tecte les √©v√©nements qui surviennent sur la page, y r√©agit et d√©clenche de nouveaux traitements. Un √©v√©nement est un changement d'√©tat qui survient sur la page (mouvements de souris, clic sur un √©l√©ment, chargement d'un √©l√©ment de la page, *etc.*). </p>

            <div style="width:100%;text-align:center;">
                <img src="../../images/javascript-events.png" alt="√âv√©nements" style="border-radius: 15px"/>
                <div style="margin:auto">Source: <a href="https://openclassrooms.com/fr/courses/1916641-dynamisez-vos-sites-web-avec-javascript/1918968-les-evenements">openclassrooms</a>.</div>
            </div>

            <h2> La d√©tection dans le code HTML </h2>

<textarea class="editor" spellcheck="false">
<button onclick="alert('Pas changer assiette pour fromage !');"> ARTHOUUUUR </button>
<button onclick="compteur++; alert(compteur);"> Je sais compter </button>
<button id="button3" onclick="colorChange();"> Po√®me </button>

<script type="text/javascript">
    var compteur = 0;
    function colorChange(){
        color = document.getElementById("button3").style.color;
        switch(color){
            case "red":
                document.getElementById("button3").style.color = "blue";
                document.getElementById("button3").innerHTML = "Violets are blue";
                break;
            case "blue":
                document.getElementById("button3").style.color = "red";
                document.getElementById("button3").innerHTML = "Roses are red";
                break;
            default:
                document.getElementById("button3").style.color = "red";
                document.getElementById("button3").innerHTML = "Roses are red";
        }
    }
</script></textarea>

            <button onclick="alert('Pas changer assiette pour fromage !');"> ARTHOUUUUR </button>
            <button onclick="compteur++; alert(compteur);"> Je sais compter </button>
            <button id="button3" onclick="colorChange();"> Po√®me </button>
            
            <script type="text/javascript">
                var compteur = 0;
                function colorChange(){
                    color = document.getElementById("button3").style.color;
                    switch(color){
                        case "red":
                            document.getElementById("button3").style.color = "blue";
                            document.getElementById("button3").innerHTML = "Violets are blue";
                            break;
                        case "blue":
                            document.getElementById("button3").style.color = "red";
                            document.getElementById("button3").innerHTML = "Roses are red";
                            break;
                        default:
                            document.getElementById("button3").style.color = "red";
                            document.getElementById("button3").innerHTML = "Roses are red";
                    }
                }
            </script>

            <p> Cette mani√®re de d√©clarer des √©v√©nements par attribut est rapide mais pr√©sente l'inconv√©nient de m√©langer le traitement JavaScript √† la mise en forme des donn√©es via HTML. </p>

            <h2> La d√©tection par le gestionnaire d'√©v√©nements </h2>

            <p> Le gestionnaire d'√©v√©nements permet de centraliser la d√©claration des √©v√©nements dans un bloc JavaScript sans modifier le code HTML gardant ainsi la s√©paration entre traitements et donn√©es. </p>

            <b><code>target.addEventListener(String myEvent, Function toDo, [options]);</code></b>

            <ul>
                <li> <i>target</i> : correspond √† l'√©l√©ment cibl√© dans le code HTML. </li>
                <li> <i>myEvent</i> : le type d'√©v√©nement √† d√©tecter. </li>
                <li> <i>toDo</i> : une fonction qui re√ßoit en param√®tre l'objet de type *Event* d√©tect√©. </li>
                <li> Le param√®tre facultatif <i>options</i> sp√©cifie les caract√©ristiques de l'√©couteur d'√©v√®nements (<i>e.g.</i> <code>{"once": true}</code> supprime automatiquement le <i>listener</i> apr√®s son premier appel. </li>
            </ul>

<textarea class="editor" spellcheck="false">
<button id="button1"> Po√®me </button>
    
<script type="text/javascript">
    function colorChange(evt) {
        let color = evt.currentTarget.style.color;
        switch(color){
        case "red":
            evt.currentTarget.style.color = "blue";
            evt.currentTarget.innerHTML = "Violets are blue";
            break;
        case "blue":
            evt.currentTarget.style.color = "red";
            evt.currentTarget.innerHTML = "Roses are red";
            break;
        default:
            evt.currentTarget.style.color = "red";
            evt.currentTarget.innerHTML = "Roses are red";
        }
        var button1 = document.getElementById("button1");
        button1.addEventListener("click", colorChange); // {"once": true}
    }
</script></textarea>

            <button id="button1"> Po√®me </button>
    
            <script type="text/javascript">
                function colorChange(evt) {
                    let color = evt.currentTarget.style.color;
                    switch(color){
                    case "red":
                        evt.currentTarget.style.color = "blue";
                        evt.currentTarget.innerHTML = "Violets are blue";
                        break;
                    case "blue":
                        evt.currentTarget.style.color = "red";
                        evt.currentTarget.innerHTML = "Roses are red";
                        break;
                    default:
                        evt.currentTarget.style.color = "red";
                        evt.currentTarget.innerHTML = "Roses are red";
                    }
                }
                var button1 = document.getElementById("button1");
                button1.addEventListener("click", colorChange); // {"once": true}
            </script>

            <p> La fonction <code>colorChange()</code> re√ßoit en param√®tre <code>evt</code> un objet de type <code>Event</code>. Un objet <code>Event</code> contient deux propri√©t√©s de cible. La propri√©t√© *currentTarget* r√©f√©rence l'objet sur lequel l'√©v√©nement a √©t√© attach√© et la propri√©t√© <code>target</code> r√©f√©rence l'objet sur lequel l'√©v√©nement s'est produit. </p>

<textarea class="editor" spellcheck="false">
<ul id="ul1">
    <li> Arthur </li>
    <li> Perceval </li>
    <li> Merlin </li>
</ul>

<div id="maDiv"> Cliquez sur un nom! </div>

<script type="text/javascript">
    var ul1 = document.getElementById("ul1");
    ul1.addEventListener("click", direBonjour);
    function direBonjour(evt){
        if(evt.target.nodeName == "LI"){ // √âvite de consid√©rer UL dans le retour.
            document.getElementById("maDiv").innerHTML = "Bonjour " + evt.target.innerHTML +
                " (" + (evt.currentTarget.id) + ") !";
        }
    }
</script></textarea>
            
            <ul id="ul1" style="cursor: pointer;">
                <li> Arthur </li>
                <li> Perceval </li>
                <li> Merlin </li>
            </ul>
            
            <div id="maDiv"> <b>Cliquez sur un nom ci-dessus!</b> </div>
            
            <script type="text/javascript">
                var ul1 = document.getElementById("ul1");
                ul1.addEventListener("click", direBonjour);
                function direBonjour(evt) {
                    if(evt.target.nodeName == "LI"){ // √âvite de consid√©rer UL dans le retour.
                        document.getElementById("maDiv").innerHTML = "Bonjour " + evt.target.innerHTML +
                            " (" + (evt.currentTarget.id) + ") !";
                    }
                }
            </script>

        </div>
    </div>


<!--
88888888888                              888          888            
    888                                  888          888            
    888                                  888          888            
    888   .d88b.  88888b.d88b.  88888b.  888  8888b.  888888 .d88b.  
    888  d8P  Y8b 888 "888 "88b 888 "88b 888     "88b 888   d8P  Y8b 
    888  88888888 888  888  888 888  888 888 .d888888 888   88888888 
    888  Y8b.     888  888  888 888 d88P 888 888  888 Y88b. Y8b.     
    888   "Y8888  888  888  888 88888P"  888 "Y888888  "Y888 "Y8888  
                                888                                  
                                888                                  
                                888                                  
-->

    <template id="cell-template">
        <section class="cell">
            <header>
                <div class="cell-title">
                    <span class="badge">
                        <span class="dot"></span>
                        <span class="title-text">JavaScript</span>
                    </span>
                </div>
                <div class="cell-actions">
                    <button class="btn run">
                        <span class="icon">‚ñ∂</span>
                        <span class="label">Ex√©cuter</span>
                    </button>
                    <button class="btn reset">
                        <span class="icon">‚ü≥</span>
                        <span class="label">R√©initialiser</span>
                    </button>

                    <button class="btn clear">
                        <span class="icon">üßπ</span>
                        <span class="label">Effacer</span>
                    </button>
                </div>
            </header>
            <textarea class="editor" spellcheck="false"></textarea>
            <div class="output" aria-live="polite"></div>
        </section>
    </template>


<!--
 .d8888b.                   d8b          888    
d88P  Y88b                  Y8P          888    
Y88b.                                    888    
 "Y888b.    .d8888b 888d888 888 88888b.  888888 
    "Y88b. d88P"    888P"   888 888 "88b 888    
      "888 888      888     888 888  888 888    
Y88b  d88P Y88b.    888     888 888 d88P Y88b.  
 "Y8888P"   "Y8888P 888     888 88888P"   "Y888 
                                888             
                                888             
                                888             
-->

    <script src="../js/main.js"></script>

    <script>
        /* ==== Add cells ==== */
   
    // addCell('cells00', '', `

    // `);


/*        
    addCell('cells00', '', `

    `);
*/

    </script>
</body>
</html>